# Copyright 2017 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# NOTE: This class is auto generated by the swagger code generator program.
# https://github.com/swagger-api/swagger-codegen.git
# Do not edit the class manually.

defmodule GoogleApi.CloudTasks.V2beta2.Model.RetryConfig do
  @moduledoc """
  Retry config.  These settings determine how a failed task attempt is retried.

  ## Attributes

  - maxAttempts (integer()): The maximum number of attempts for a task.  Cloud Tasks will attempt the task &#x60;max_attempts&#x60; times (that is, if the first attempt fails, then there will be &#x60;max_attempts - 1&#x60; retries).  Must be &gt; 0. Defaults to: `null`.
  - maxBackoff (String.t): A task will be [scheduled](Task.schedule_time) for retry between min_backoff and max_backoff duration after it fails, if the queue&#39;s RetryConfig specifies that the task should be retried.  If unspecified when the queue is created, Cloud Tasks will pick the default.  This field is output only for [pull queues](google.cloud.tasks.v2beta2.PullTarget).   &#x60;max_backoff&#x60; will be truncated to the nearest second.  This field has the same meaning as [max_backoff_seconds in queue.yaml/xml](/appengine/docs/standard/python/config/queueref#retry_parameters). Defaults to: `null`.
  - maxDoublings (integer()): The time between retries will double &#x60;max_doublings&#x60; times.  A task&#39;s retry interval starts at min_backoff, then doubles &#x60;max_doublings&#x60; times, then increases linearly, and finally retries retries at intervals of max_backoff up to max_attempts times.  For example, if min_backoff is 10s, max_backoff is 300s, and &#x60;max_doublings&#x60; is 3, then the a task will first be retried in 10s. The retry interval will double three times, and then increase linearly by 2^3 * 10s.  Finally, the task will retry at intervals of max_backoff until the task has been attempted max_attempts times. Thus, the requests will retry at 10s, 20s, 40s, 80s, 160s, 240s, 300s, 300s, ....  If unspecified when the queue is created, Cloud Tasks will pick the default.  This field is output only for [pull queues](google.cloud.tasks.v2beta2.PullTarget).   This field has the same meaning as [max_doublings in queue.yaml/xml](/appengine/docs/standard/python/config/queueref#retry_parameters). Defaults to: `null`.
  - maxRetryDuration (String.t): If positive, &#x60;max_retry_duration&#x60; specifies the time limit for retrying a failed task, measured from when the task was first attempted. Once &#x60;max_retry_duration&#x60; time has passed *and* the task has been attempted max_attempts times, no further attempts will be made and the task will be deleted.  If zero, then the task age is unlimited.  If unspecified when the queue is created, Cloud Tasks will pick the default.  This field is output only for [pull queues](google.cloud.tasks.v2beta2.PullTarget).   &#x60;max_retry_duration&#x60; will be truncated to the nearest second.  This field has the same meaning as [task_age_limit in queue.yaml/xml](/appengine/docs/standard/python/config/queueref#retry_parameters). Defaults to: `null`.
  - minBackoff (String.t): A task will be [scheduled](Task.schedule_time) for retry between min_backoff and max_backoff duration after it fails, if the queue&#39;s RetryConfig specifies that the task should be retried.  If unspecified when the queue is created, Cloud Tasks will pick the default.  This field is output only for [pull queues](google.cloud.tasks.v2beta2.PullTarget).   &#x60;min_backoff&#x60; will be truncated to the nearest second.  This field has the same meaning as [min_backoff_seconds in queue.yaml/xml](/appengine/docs/standard/python/config/queueref#retry_parameters). Defaults to: `null`.
  - unlimitedAttempts (boolean()): If true, then the number of attempts is unlimited. Defaults to: `null`.
  """

  use GoogleApi.Gax.ModelBase

  @type t :: %__MODULE__{
          :maxAttempts => any(),
          :maxBackoff => any(),
          :maxDoublings => any(),
          :maxRetryDuration => any(),
          :minBackoff => any(),
          :unlimitedAttempts => any()
        }

  field(:maxAttempts)
  field(:maxBackoff)
  field(:maxDoublings)
  field(:maxRetryDuration)
  field(:minBackoff)
  field(:unlimitedAttempts)
end

defimpl Poison.Decoder, for: GoogleApi.CloudTasks.V2beta2.Model.RetryConfig do
  def decode(value, options) do
    GoogleApi.CloudTasks.V2beta2.Model.RetryConfig.decode(value, options)
  end
end

defimpl Poison.Encoder, for: GoogleApi.CloudTasks.V2beta2.Model.RetryConfig do
  def encode(value, options) do
    GoogleApi.Gax.ModelBase.encode(value, options)
  end
end
